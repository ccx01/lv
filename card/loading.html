
<head>
<script>
function buildSpinner(data) {
  
  var canvas = document.createElement('canvas');
  canvas.height = 100;
  canvas.width = 100;
  document.getElementsByTagName('article')[0].appendChild(canvas);
  var ctx = canvas.getContext("2d"),
    i = 0, degrees = data.degrees, loops = 0, degreesList = [];
  for (i = 0; i < degrees; i++) {
	  
    degreesList.push(i);
  }
  init();
  // reset
  i = 0;
  
  // so I can kill it later
  setInterval(draw, 1000/degrees); 

    function init() {
        var time = new Date();
        var ss = time.getSeconds();
        var mm = time.getMinutes();
        var hh = time.getHours();
        /*return {
            'h': hh ,
            'm': mm,
            's': ss
        };*/
		var s=Math.floor(ss/2);
		var left = degreesList.slice(0, s);
    var right = degreesList.slice(s, degreesList.length);
    degreesList = right.concat(left);
    }

  function reset() {
    ctx.clearRect(0,0,100,100); // clear canvas
    
    var left = degreesList.slice(0, 1);
    var right = degreesList.slice(1, degreesList.length);
    degreesList = right.concat(left);
  }
  
  function draw() {
    var c, s, e;

    var d = 0;

    if (i == 0) {
		
      reset();

    }
//秒针	
	ctx.save();

    d = degreesList[i];
    c = Math.floor(255/degrees*i);
	if(c==0){
		ctx.strokeStyle = 'rgb(255, 0, 0)';
		}else{
    ctx.strokeStyle = 'rgb(' + c + ', ' + c + ', ' + c + ')';}
    ctx.lineWidth = data.size;
    ctx.beginPath();
    s = Math.floor(360/degrees*(d));
    e = Math.floor(360/degrees*(d+1)) - 1;

    ctx.arc(data.x, data.y, data.size, (Math.PI/180)*s, (Math.PI/180)*e, false);
    ctx.stroke();

    ctx.restore();
    i++;
    if (i >= degrees) {
      i = 0;
    }
  }  
}
</script>
</head>
<body>

    <article></article>
<script>

buildSpinner({ x : 50, y : 50, size : 20, degrees : 30 });

</script>

</body>
</html>